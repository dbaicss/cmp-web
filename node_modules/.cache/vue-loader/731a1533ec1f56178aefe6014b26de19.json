{"remainingRequest":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuyangbing/Desktop/devopsManage/client/src/views/ServerList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuyangbing/Desktop/devopsManage/client/src/views/ServerList.vue","mtime":1557192538000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DialogFound from \"../components/DialogFound\";\n    export default {\n        name: 'serverlist',\n        data(){\n            return {\n                search_data: {\n                    startTime: '',\n                    endTime: ''\n                },\n                input: '',\n                paginations: {\n                    page_index: 1,   //当前页数\n                    total: 0,    //总条数\n                    page_size: 5,   //当前页显示多少条\n                    page_sizes: [5,50,100,200],   //可选每页显示多少条\n                    layout: 'total,sizes,prev,next,pager,jumper'\n                },\n                tableData: [],\n                allTableData: [],\n                filterTableData: [],\n                nName: '',\n                nNameOpt: [],\n                dialog: {\n                    show: false,\n                    title: \"\",\n                    option: \"edit\",\n                    isedit: true\n                },\n                form:{\n                    name:'',\n                    location:'',\n                    model:'',\n                    sn:'',\n                    ip:'',\n                    purch_time:'',\n                    used:'',\n                    department:'',\n                    audit:'',\n                    isvirtual:'',\n                    status:'',\n                    description:'',\n                    id: ''\n                },\n            };\n        },\n        components: {\n            DialogFound\n        },\n        created(){\n            this.getProfile();\n        },\n        methods: {\n            getProfile(){\n                //获取后端数据\n                this.$axios.get(\"/api/server/list\")\n                    .then(res => {\n                        this.allTableData = res.data.data;\n                        this.filterTableData = res.data.data;\n                        //设置分页数据\n                        this.setPaginations();\n\n                    });\n            },\n            onEditMoney(row) {\n                // 编辑\n                this.dialog = {\n                    show: true,\n                    title: \"修改服务器信息\",\n                    option: \"edit\",\n                    isedit: true\n                };\n                this.form = {\n                    name: row.name,\n                    location: row.location,\n                    model: row.model,\n                    sn: row.sn,\n                    ip: row.ip,\n                    purch_time: row.purch_time,\n                    used: row.used,\n                    department: row.department,\n                    audit: row.audit,\n                    isvirtual: row.isvirtual,\n                    status: row.status,\n                    description: row.description,\n                    id: row._id\n                };\n            },\n            onAddMoney() {\n                // 添加\n                this.dialog = {\n                    show: true,\n                    title: \"添加服务器信息\",\n                    option: \"add\",\n                    isedit: false\n                };\n                this.form = {\n                    name:'',\n                    location:'',\n                    model:'',\n                    sn:'',\n                    ip:'',\n                    purch_time:'',\n                    used:'',\n                    department:'',\n                    audit:'',\n                    isvirtual:'',\n                    status:'',\n                    description:'',\n                    id: ''\n                };\n            },\n            setPaginations(){\n                //分页属性设置\n                this.paginations.total = this.allTableData.length;\n                this.paginations.page_index = 1;\n                this.paginations.page_size = 5;\n                //设置默认的分页数据\n                this.tableData = this.allTableData.filter((item, index) => {\n                    return index < this.paginations.page_size;\n                });\n            },\n            onSearchPod(){\n                const podname = this.input\n                this.allTableData = this.filterTableData.filter(item => {\n                    return ((item.ip).indexOf(podname) != -1)\n                });\n                this.setPaginations();\n            },\n            handleSizeChange(page_size){\n                //切换size\n                this.paginations.page_index = 1;\n                this.paginations.page_size = page_size;\n                this.tableData = this.allTableData.filter((item, index) => {\n                    return index < page_size;\n                });\n            },\n            handleCurrentChange(page){\n                //获取当前页\n                let index = this.paginations.page_size * (page -1);\n                //数据总数\n                let nums = this.paginations.page_size * page;\n                let tables = [];\n                for (let i=index;i<nums;i++){\n                    if (this.allTableData[i]) {\n                        tables.push(this.allTableData[i]);\n                    }\n                    this.tableData = tables;\n                }\n            },\n        },\n    };\n",{"version":3,"sources":["ServerList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ServerList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"fillcontain\">\n        <div>\n            <el-form :inline=\"true\" ref=\"search_data\" :model=\"search_data\">\n                <!-- 时间筛选 -->\n                <el-form-item class=\"btnLeft\">\n                    <el-button type=\"primary\" size =\"small\" icon=\"view\" @click='onAddMoney()'>添加</el-button>\n                </el-form-item>\n                <el-form-item class=\"btnRight\">\n                        <el-input v-model=\"input\" placeholder=\"请输入要查找的ip\"></el-input>\n                </el-form-item>\n                <el-form-item class=\"btnRight\">               \n                        <el-button type=\"primary\" size =\"small\" icon=\"search\" @click='onSearchPod()'>查找</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n        <div class=\"table_container\">\n            <el-table\n                    v-if=\"tableData.length > 0\"\n                    :data=\"tableData\"\n                    max-height=\"650\"\n                    border\n                    :default-sort = \"{prop: 'ip', order: 'descending',prop: 'purch_time', order: 'descending'}\"\n                    style=\"width: 100%\">\n                <el-table-column\n                        prop=\"name\"\n                        label=\"服务器名称\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"location\"\n                        label=\"放置位置\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"model\"\n                        label=\"品牌\"\n                        align='center'\n                        width=\"200\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"sn\"\n                        label=\"sn码\"\n                        align='center'\n                        width=\"250\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"ip\"\n                        label=\"ip地址\"\n                        align='center'\n                        width=\"150\"\n                        sortable>\n                        <template slot-scope=\"scope\">\n                            <el-icon name=\"ip\"></el-icon>\n                            <span style=\"margin-left: 10px\">{{ scope.row.ip }}</span>\n                        </template>\n                </el-table-column>\n                <el-table-column\n                        prop=\"purch_time\"\n                        label=\"上架时间\"\n                        align='center'\n                        width=\"200\"\n                        sortable>\n                        <template slot-scope=\"scope\">\n                            <el-icon name=\"time\"></el-icon>\n                            <span style=\"margin-left: 10px\">{{ scope.row.purch_time }}</span>\n                        </template>\n                </el-table-column>\n                <el-table-column\n                        prop=\"used\"\n                        label=\"用途\"\n                        align='center'\n                        width=\"200\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"department\"\n                        label=\"所属部门\"\n                        align='center'\n                        width=\"200\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"audit\"\n                        label=\"负责人\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"isvirtual\"\n                        label=\"是否虚拟化\"\n                        align='center'\n                        width=\"150\">\n                        <template slot-scope=\"scope\">\n                            <span v-if=\"scope.row.isvirtual=='0'\" style=\"color: green\">否</span>\n                            <span v-else style=\"color: red\">是</span>\n                        </template>\n                </el-table-column>\n                <el-table-column\n                        prop=\"status\"\n                        label=\"当前状态\"\n                        align='center'\n                        width=\"150\">\n                        <template slot-scope=\"scope\">\n                            <span v-if=\"scope.row.status=='使用中'\" style=\"color: green\">{{ scope.row.status }}</span>\n                            <span v-else style=\"color: red\">{{ scope.row.status }}</span>\n                        </template>\n                </el-table-column>\n                <el-table-column\n                        prop=\"description\"\n                        label=\"描述\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                    prop=\"operation\"\n                    align='center'\n                    label=\"操作\"\n                    fixed=\"right\"\n                    width=\"250\">\n                    <template slot-scope='scope'>\n                        <el-button \n                            type=\"success\" \n                            icon='share' \n                            size=\"small\"\n                            @click='handlePodTerminal(scope.row)'\n                        >查看详情</el-button>\n                        <el-button \n                            type=\"warning\" \n                            icon='edit' \n                            size=\"small\"\n                            @click='onEditMoney(scope.row)'\n                        >编辑</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <!-- 分页 -->\n            <el-row>\n                <el-col :span=\"24\">\n                    <div class=\"pagination\">\n                        <el-pagination\n                                @size-change=\"handleSizeChange\"\n                                @current-change=\"handleCurrentChange\"\n                                :current-page.sync=\"paginations.page_index\"\n                                :page-sizes=\"paginations.page_sizes\"\n                                :page-size=\"paginations.page_size\"\n                                :layout=\"paginations.layout\"\n                                :total=\"paginations.total\">\n                        </el-pagination>\n                    </div>\n                </el-col>\n            </el-row>\n        </div>\n        <!-- 使用dialog -->\n        <DialogFound :dialog='dialog' :form='form' @update=\"getProfile\"></DialogFound>\n    </div>\n</template>\n\n<script>\nimport DialogFound from \"../components/DialogFound\";\n    export default {\n        name: 'serverlist',\n        data(){\n            return {\n                search_data: {\n                    startTime: '',\n                    endTime: ''\n                },\n                input: '',\n                paginations: {\n                    page_index: 1,   //当前页数\n                    total: 0,    //总条数\n                    page_size: 5,   //当前页显示多少条\n                    page_sizes: [5,50,100,200],   //可选每页显示多少条\n                    layout: 'total,sizes,prev,next,pager,jumper'\n                },\n                tableData: [],\n                allTableData: [],\n                filterTableData: [],\n                nName: '',\n                nNameOpt: [],\n                dialog: {\n                    show: false,\n                    title: \"\",\n                    option: \"edit\",\n                    isedit: true\n                },\n                form:{\n                    name:'',\n                    location:'',\n                    model:'',\n                    sn:'',\n                    ip:'',\n                    purch_time:'',\n                    used:'',\n                    department:'',\n                    audit:'',\n                    isvirtual:'',\n                    status:'',\n                    description:'',\n                    id: ''\n                },\n            };\n        },\n        components: {\n            DialogFound\n        },\n        created(){\n            this.getProfile();\n        },\n        methods: {\n            getProfile(){\n                //获取后端数据\n                this.$axios.get(\"/api/server/list\")\n                    .then(res => {\n                        this.allTableData = res.data.data;\n                        this.filterTableData = res.data.data;\n                        //设置分页数据\n                        this.setPaginations();\n\n                    });\n            },\n            onEditMoney(row) {\n                // 编辑\n                this.dialog = {\n                    show: true,\n                    title: \"修改服务器信息\",\n                    option: \"edit\",\n                    isedit: true\n                };\n                this.form = {\n                    name: row.name,\n                    location: row.location,\n                    model: row.model,\n                    sn: row.sn,\n                    ip: row.ip,\n                    purch_time: row.purch_time,\n                    used: row.used,\n                    department: row.department,\n                    audit: row.audit,\n                    isvirtual: row.isvirtual,\n                    status: row.status,\n                    description: row.description,\n                    id: row._id\n                };\n            },\n            onAddMoney() {\n                // 添加\n                this.dialog = {\n                    show: true,\n                    title: \"添加服务器信息\",\n                    option: \"add\",\n                    isedit: false\n                };\n                this.form = {\n                    name:'',\n                    location:'',\n                    model:'',\n                    sn:'',\n                    ip:'',\n                    purch_time:'',\n                    used:'',\n                    department:'',\n                    audit:'',\n                    isvirtual:'',\n                    status:'',\n                    description:'',\n                    id: ''\n                };\n            },\n            setPaginations(){\n                //分页属性设置\n                this.paginations.total = this.allTableData.length;\n                this.paginations.page_index = 1;\n                this.paginations.page_size = 5;\n                //设置默认的分页数据\n                this.tableData = this.allTableData.filter((item, index) => {\n                    return index < this.paginations.page_size;\n                });\n            },\n            onSearchPod(){\n                const podname = this.input\n                this.allTableData = this.filterTableData.filter(item => {\n                    return ((item.ip).indexOf(podname) != -1)\n                });\n                this.setPaginations();\n            },\n            handleSizeChange(page_size){\n                //切换size\n                this.paginations.page_index = 1;\n                this.paginations.page_size = page_size;\n                this.tableData = this.allTableData.filter((item, index) => {\n                    return index < page_size;\n                });\n            },\n            handleCurrentChange(page){\n                //获取当前页\n                let index = this.paginations.page_size * (page -1);\n                //数据总数\n                let nums = this.paginations.page_size * page;\n                let tables = [];\n                for (let i=index;i<nums;i++){\n                    if (this.allTableData[i]) {\n                        tables.push(this.allTableData[i]);\n                    }\n                    this.tableData = tables;\n                }\n            },\n        },\n    };\n</script>\n<style scoped>\n    .fillcontain {\n        width: 100%;\n        height: 100%;\n        padding: 16px;\n        box-sizing: border-box;\n    }\n    .btnRight {\n        float: right;\n    }\n    .pagination {\n        text-align: right;\n        margin-top: 10px;\n    }\n\n</style>"]}]}