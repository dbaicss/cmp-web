{"remainingRequest":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuyangbing/Desktop/crontab-client/client/src/components/Dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuyangbing/Desktop/crontab-client/client/src/components/Dialog.vue","mtime":1543380525000},{"path":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: 'logfound',\n    data(){\n        return {\n            form_rules: {\n                hostname:[{required:true, message:'主机名不能为空', trigger:'blur'}],\n                title: [\n                    { required: true, message: \"表达式不能为空！\", trigger: \"blur\" }\n                ],\n                note: [\n                    { required: true, message: \"注释不能为空！\", trigger: \"blur\" }\n                ],\n                updatetime: [\n                    { required: true, message: \"创建时间不能为空！\", trigger: \"blur\" }\n                ]\n            }\n        }\n    },\n    props: {\n        dialog: Object,\n        form: Object  //接收父节点FunList传递过来的form\n    },\n    methods:{\n        onSubmit(form){\n            this.$refs[form].validate(valid => {\n                if (valid){\n                    const url = this.dialog.option == 'add' ? 'add' : 'edit';\n                    let data = this.form;\n                    const params = new URLSearchParams();\n                    params.append('job', JSON.stringify(data));\n                    this.$axios.post(`/api/crontab/${url}`,params,{headers: {'Content-Type':'application/x-www-form-urlencoded'}})\n                        .then(res => {\n                            this.$message({\n                                message:'添加成功',\n                                type:'success'\n                            });\n                            //隐藏dialog\n                            this.dialog.show = false;\n                            this.$emit(\"update\");   //emit刷新,重新请求数据,让父级刷新\n                        });\n                }\n            })\n        }\n    }\n}\n",{"version":3,"sources":["Dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dialog.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"logfound\">\n        <el-dialog :title=\"dialog.title\" :visible.sync=\"dialog.show\"  :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :modal-append-to-body=\"false\">\n            <div class=\"form\">\n                <el-form ref=\"form\" :model=\"form\" :rules=\"form_rules\" label-width=\"120px\" style=\"margin: 10px;width:auto;\">\n                    <el-form-item prop='hostname'  label=\"主机名:\">\n                        <el-input type=\"hostname\" v-model=\"form.hostname\"></el-input>\n                    </el-form-item>\n\n                    <el-form-item prop='title' label=\"表达式:\">\n                        <el-input type=\"title\" v-model=\"form.title\"></el-input>\n                    </el-form-item>\n\n                    <el-form-item prop='note' label=\"注释:\">\n                        <el-input type=\"note\" v-model=\"form.note\"></el-input>\n                    </el-form-item>\n\n                    <el-form-item prop='opreater' label=\"所属账号:\">\n                        <el-input type=\"opreater\" v-model=\"form.opreater\"></el-input>\n                    </el-form-item>\n                    <el-form-item prop='updatetime' label=\"创建时间:\">\n                        <el-input type=\"updatetime\" v-model=\"form.updatetime\"></el-input>\n                    </el-form-item>\n                    <el-form-item  class=\"text_right\">\n                        <el-button @click=\"dialog.show = false\">取 消</el-button>\n                        <el-button type=\"primary\" @click='onSubmit(\"form\")'>提 交</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'logfound',\n        data(){\n            return {\n                form_rules: {\n                    hostname:[{required:true, message:'主机名不能为空', trigger:'blur'}],\n                    title: [\n                        { required: true, message: \"表达式不能为空！\", trigger: \"blur\" }\n                    ],\n                    note: [\n                        { required: true, message: \"注释不能为空！\", trigger: \"blur\" }\n                    ],\n                    updatetime: [\n                        { required: true, message: \"创建时间不能为空！\", trigger: \"blur\" }\n                    ]\n                }\n            }\n        },\n        props: {\n            dialog: Object,\n            form: Object  //接收父节点FunList传递过来的form\n        },\n        methods:{\n            onSubmit(form){\n                this.$refs[form].validate(valid => {\n                    if (valid){\n                        const url = this.dialog.option == 'add' ? 'add' : 'edit';\n                        let data = this.form;\n                        const params = new URLSearchParams();\n                        params.append('job', JSON.stringify(data));\n                        this.$axios.post(`/api/crontab/${url}`,params,{headers: {'Content-Type':'application/x-www-form-urlencoded'}})\n                            .then(res => {\n                                this.$message({\n                                    message:'添加成功',\n                                    type:'success'\n                                });\n                                //隐藏dialog\n                                this.dialog.show = false;\n                                this.$emit(\"update\");   //emit刷新,重新请求数据,让父级刷新\n                            });\n                    }\n                })\n            }\n        }\n    }\n</script>\n<style scoped>\n\n</style>\n"]}]}