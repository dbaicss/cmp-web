{"remainingRequest":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuyangbing/Desktop/devopsManage/client/src/views/AuditList.vue?vue&type=style&index=0&id=3f67ec56&scoped=true&lang=css&","dependencies":[{"path":"/Users/xuyangbing/Desktop/devopsManage/client/src/views/AuditList.vue","mtime":1553677160000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.fillcontain {\n    width: 100%;\n    height: 100%;\n    padding: 16px;\n    box-sizing: border-box;\n}\n.btnRight {\n    float: right;\n}\n.pagination {\n    text-align: right;\n    margin-top: 10px;\n}\n",{"version":3,"sources":["AuditList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AuditList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"fillcontain\">\n        <div>\n            <el-form :inline=\"true\" ref=\"search_data\" :model=\"search_data\">\n                <!-- 时间筛选 -->\n                <el-form-item label=\"按照时间筛选\">\n                    <el-date-picker\n                            v-model=\"search_data.startTime\"\n                            type=\"datetime\"\n                            placeholder=\"选择开始时间\">\n                    </el-date-picker> --\n                    <el-date-picker\n                            v-model=\"search_data.endTime\"\n                            type=\"datetime\"\n                            placeholder=\"选择结束时间\">\n                    </el-date-picker>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" size =\"small\" icon=\"search\" @click='handleSearch()'>筛选</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n        <div class=\"table_container\">\n            <el-table\n                    v-if=\"tableData.length > 0\"\n                    :data=\"tableData\"\n                    max-height=\"650\"\n                    border\n                    style=\"width: 100%\">\n                <el-table-column\n                        prop=\"kind\"\n                        label=\"实例类型\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"disk\"\n                        label=\"磁盘大小\"\n                        align='center'\n                        width=\"100\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"disk_type\"\n                        label=\"磁盘类型\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"os_version\"\n                        label=\"操作系统\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"network\"\n                        label=\"外网带宽(M)\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"instance_count\"\n                        label=\"实例数量(个)\"\n                        align='center'\n                        width=\"200\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"live_time\"\n                        label=\"使用时长(天)\"\n                        align='center'\n                        width=\"200\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"deploy_time\"\n                        label=\"交付日期\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"description\"\n                        label=\"项目描述\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"apply_name\"\n                        label=\"申请人\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"sp_status\"\n                        label=\"审核状态\"\n                        align='center'\n                        width=\"50\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"apply_time\"\n                        label=\"申请时间\"\n                        align='center'\n                        width=\"250\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"sp_num\"\n                        label=\"申请单号\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"sp_name\"\n                        label=\"申请名称\"\n                        align='center'\n                        width=\"250\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"apply_org\"\n                        label=\"申请人部门\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"approval_name\"\n                        label=\"审批人姓名\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"notify_name\"\n                        label=\"抄送人姓名\"\n                        align='center'\n                        width=\"250\">\n                </el-table-column>\n                <el-table-column\n                        prop=\"apply_user_id\"\n                        label=\"提交申请人userid\"\n                        align='center'\n                        width=\"150\">\n                </el-table-column>\n            </el-table>\n            <!-- 分页 -->\n            <el-row>\n                <el-col :span=\"24\">\n                    <div class=\"pagination\">\n                        <el-pagination\n                                @size-change=\"handleSizeChange\"\n                                @current-change=\"handleCurrentChange\"\n                                :current-page.sync=\"paginations.page_index\"\n                                :page-sizes=\"paginations.page_sizes\"\n                                :page-size=\"paginations.page_size\"\n                                :layout=\"paginations.layout\"\n                                :total=\"paginations.total\">\n                        </el-pagination>\n                    </div>\n                </el-col>\n            </el-row>\n        </div>\n        <!-- 使用dialog -->\n        <!--Dialog :dialog='dialog' :form='form' @update=\"getProfile\"></Dialog-->\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'auditlist',\n        data(){\n            return {\n                search_data: {\n                    startTime: '',\n                    endTime: ''\n                },\n                paginations: {\n                    page_index: 1,   //当前页数\n                    total: 0,    //总条数\n                    page_size: 5,   //当前页显示多少条\n                    page_sizes: [5,50,100,200],   //可选每页显示多少条\n                    layout: 'total,sizes,prev,next,pager,jumper'\n                },\n                tableData: [],\n                allTableData: [],\n                filterTableData: [],\n                form:{\n                    kind:'',\n                    disk:'',\n                    disk_type:'',\n                    os_version:'',\n                    network:'',\n                    instance_count:'',\n                    live_time:'',\n                    deploy_time:'',\n                    description:'',\n                    apply_name:'',\n                    sp_status:'',\n                    apply_time:'',\n                    sp_num:'',\n                    sp_name:'',\n                    apply_org:'',\n                    approval_name:'',\n                    notify_name:'',\n                    apply_user_id:'',\n                },\n                //dialog: {\n                //    show: false,\n                //    title:'',\n                //    option:'edit'\n                //}\n            }\n        },\n        created(){\n            this.getProfile();\n        },\n        methods: {\n            getProfile(){\n                //获取后端数据\n                this.$axios.get(\"/api/audit/list\")\n                    .then(res => {\n                        this.allTableData = res.data.data;\n                        this.filterTableData = res.data.data;\n                        //设置分页数据\n                        this.setPaginations();\n                    });\n            },\n            setPaginations(){\n                //分页属性设置\n                this.paginations.total = this.allTableData.length;\n                this.paginations.page_index = 1;\n                this.paginations.page_size = 5;\n                //设置默认的分页数据\n                this.tableData = this.allTableData.filter((item, index) => {\n                    return index < this.paginations.page_size;\n                });\n            },\n            handleSizeChange(page_size){\n                //切换size\n                this.paginations.page_index = 1;\n                this.paginations.page_size = page_size;\n                console.log(this.allTableData);\n                this.tableData = this.allTableData.filter((item, index) => {\n                    return index < page_size;\n                });\n            },\n            handleCurrentChange(page){\n                //获取当前页\n                let index = this.paginations.page_size * (page -1);\n                //数据总数\n                let nums = this.paginations.page_size * page;\n                let tables = [];\n                for (let i=index;i<nums;i++){\n                    if (this.allTableData[i]) {\n                        tables.push(this.allTableData[i]);\n                    }\n                    this.tableData = tables;\n                }\n            },\n            handleSearch(){\n                //筛选\n                if(!this.search_data.startTime|| !this.search_data.endTime) {\n                    this.$message({\n                        type:'warning',\n                        message:'请选择时间区间'\n\n                    });\n                    this.getProfile();\n                    return;\n                }\n                const sTime = this.search_data.startTime.getTime();\n                const eTime = this.search_data.endTime.getTime();\n                this.allTableData = this.filterTableData.filter(item => {\n                    let date = new Date(item.apply_time);\n                    let time = date.getTime();\n                    return time >= sTime && time <= eTime;\n                });\n                //重新调用分页方法\n                this.setPaginations();\n            }\n        },\n    };\n</script>\n<style scoped>\n    .fillcontain {\n        width: 100%;\n        height: 100%;\n        padding: 16px;\n        box-sizing: border-box;\n    }\n    .btnRight {\n        float: right;\n    }\n    .pagination {\n        text-align: right;\n        margin-top: 10px;\n    }\n</style>\n"]}]}