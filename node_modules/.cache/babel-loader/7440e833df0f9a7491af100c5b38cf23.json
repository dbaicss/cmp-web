{"remainingRequest":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/babel-loader/lib/index.js!/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuyangbing/Desktop/devopsManage/client/src/components/Console.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuyangbing/Desktop/devopsManage/client/src/components/Console.vue","mtime":1553483711000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\nimport Terminal from './Xterm';\nexport default {\n  name: 'Console',\n  props: {\n    terminal: {\n      type: Object,\n      default: {}\n    }\n  },\n  data: function data() {\n    return {\n      term: null,\n      terminalSocket: null\n    };\n  },\n  computed: {\n    cluster: function cluster() {\n      return '';\n    },\n    namespace: function namespace() {\n      return localStorage.getItem('namespace');\n    },\n    pod: function pod() {\n      return localStorage.getItem('name');\n    },\n    container: function container() {\n      //return this.$route.params.container\n      return '';\n    },\n    wsUrl: function wsUrl() {\n      //const protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://'\n      var host = window.location.host;\n      return \"\".concat(host);\n    }\n  },\n  methods: {\n    runRealTerminal: function runRealTerminal() {\n      console.log('webSocket is finished');\n    },\n    errorRealTerminal: function errorRealTerminal() {\n      console.log('error');\n    },\n    closeRealTerminal: function closeRealTerminal() {\n      console.log('close');\n    }\n  },\n  mounted: function mounted() {\n    console.log('pid : ' + this.terminal.pid + ' is on ready');\n    var terminalContainer = document.getElementById('terminal');\n    this.term = new Terminal();\n    this.term.open(terminalContainer); // open websocket\n\n    console.log(\"\".concat(this.wsUrl));\n    this.terminalSocket = new WebSocket(\"ws://localhost:8000/ssh?podNs=\".concat(this.namespace, \"&podName=\").concat(this.pod, \"&containerName=\").concat(this.container));\n    this.terminalSocket.onopen = this.runRealTerminal;\n    this.terminalSocket.onclose = this.closeRealTerminal;\n    this.terminalSocket.onerror = this.errorRealTerminal;\n    this.term.attach(this.terminalSocket);\n    this.term._initialized = true;\n    console.log('mounted is going on');\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.terminalSocket.close();\n    this.term.destroy();\n  }\n};",{"version":3,"sources":["Console.vue"],"names":[],"mappings":";;;AAIA,OAAA,QAAA,MAAA,SAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,cAAA,EAAA;AAFA,KAAA;AAIA,GAbA;AAcA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,aAAA,EAAA;AACA,KAHA;AAIA,IAAA,SAJA,uBAIA;AACA,aAAA,YAAA,CAAA,OAAA,CAAA,WAAA,CAAA;AACA,KANA;AAOA,IAAA,GAPA,iBAOA;AACA,aAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA;AACA,KATA;AAUA,IAAA,SAVA,uBAUA;AACA;AACA,aAAA,EAAA;AACA,KAbA;AAcA,IAAA,KAdA,mBAcA;AACA;AACA,UAAA,IAAA,GAAA,MAAA,CAAA,QAAA,CAAA,IAAA;AACA,uBAAA,IAAA;AACA;AAlBA,GAdA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,6BACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,uBAAA;AACA,KAHA;AAIA,IAAA,iBAJA,+BAIA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA,KANA;AAOA,IAAA,iBAPA,+BAOA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA;AATA,GAlCA;AA6CA,EAAA,OA7CA,qBA6CA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,WAAA,KAAA,QAAA,CAAA,GAAA,GAAA,cAAA;AACA,QAAA,iBAAA,GAAA,QAAA,CAAA,cAAA,CAAA,UAAA,CAAA;AACA,SAAA,IAAA,GAAA,IAAA,QAAA,EAAA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,iBAAA,EAJA,CAKA;;AACA,IAAA,OAAA,CAAA,GAAA,WAAA,KAAA,KAAA;AACA,SAAA,cAAA,GAAA,IAAA,SAAA,yCAAA,KAAA,SAAA,sBAAA,KAAA,GAAA,4BAAA,KAAA,SAAA,EAAA;AACA,SAAA,cAAA,CAAA,MAAA,GAAA,KAAA,eAAA;AACA,SAAA,cAAA,CAAA,OAAA,GAAA,KAAA,iBAAA;AACA,SAAA,cAAA,CAAA,OAAA,GAAA,KAAA,iBAAA;AACA,SAAA,IAAA,CAAA,MAAA,CAAA,KAAA,cAAA;AACA,SAAA,IAAA,CAAA,YAAA,GAAA,IAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,qBAAA;AACA,GA3DA;AA4DA,EAAA,aA5DA,2BA4DA;AACA,SAAA,cAAA,CAAA,KAAA;AACA,SAAA,IAAA,CAAA,OAAA;AACA;AA/DA,CAAA","sourcesContent":["<template>\n    <div class=\"console\" id=\"terminal\"></div>\n</template>\n<script>\nimport Terminal from './Xterm'\nexport default {\n  name: 'Console',\n  props: {\n    terminal: {\n      type: Object,\n      default: {}\n    }\n  },\n  data () {\n    return {\n      term: null,\n      terminalSocket: null\n    }\n  },\n  computed: {\n    cluster() {\n      return ''\n    },\n    namespace() {\n      return localStorage.getItem('namespace')\n    },\n    pod() {\n      return localStorage.getItem('name')\n    },\n    container() {\n      //return this.$route.params.container\n      return ''\n    },\n    wsUrl() {\n      //const protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://'\n      const host = window.location.host\n      return `${host}`\n    }\n  },\n  methods: {\n    runRealTerminal () {\n      console.log('webSocket is finished')\n    },\n    errorRealTerminal () {\n      console.log('error')\n    },\n    closeRealTerminal () {\n      console.log('close')\n    }\n  },\n  mounted () {\n    console.log('pid : ' + this.terminal.pid + ' is on ready')\n    let terminalContainer = document.getElementById('terminal')\n    this.term = new Terminal()\n    this.term.open(terminalContainer)\n    // open websocket\n    console.log(`${this.wsUrl}`)\n    this.terminalSocket = new WebSocket(`ws://localhost:8000/ssh?podNs=${this.namespace}&podName=${this.pod}&containerName=${this.container}`)\n    this.terminalSocket.onopen = this.runRealTerminal\n    this.terminalSocket.onclose = this.closeRealTerminal\n    this.terminalSocket.onerror = this.errorRealTerminal\n    this.term.attach(this.terminalSocket)\n    this.term._initialized = true\n    console.log('mounted is going on')\n  },\n  beforeDestroy () {\n    this.terminalSocket.close()\n    this.term.destroy()\n  }\n}\n</script>"],"sourceRoot":"src/components"}]}