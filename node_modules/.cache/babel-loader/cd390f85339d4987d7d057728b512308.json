{"remainingRequest":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/babel-loader/lib/index.js!/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuyangbing/Desktop/devopsManage/client/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuyangbing/Desktop/devopsManage/client/src/views/Login.vue","mtime":1553676704000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _typeof from \"/Users/xuyangbing/Desktop/devopsManage/client/node_modules/@babel/runtime/helpers/esm/typeof\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport jwt_decode from \"jwt-decode\";\nimport qs from 'qs';\nexport default {\n  name: \"login\",\n  data: function data() {\n    return {\n      loginUser: {\n        username: \"\",\n        password: \"\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"用户名不能为空\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"密码不能为空\",\n          trigger: \"blur\"\n        }, {\n          min: 6,\n          max: 30,\n          message: \"长度在 6 到 30 个字符\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          //this.$axios.post(\"/api/user/login\", this.loginUser).then(res => {\n          _this.$axios({\n            method: 'post',\n            url: '/api/user/login',\n            data: _this.loginUser //headers: {'Content-Type': 'application/x-www-form-urlencoded' }\n\n          }).then(function (res) {\n            // 登录成功\n            var token = res.data.data.token;\n            localStorage.setItem(\"eleToken\", token); // 解析token\n\n            var decode = jwt_decode(token); // 存储数据\n\n            _this.$store.dispatch(\"setIsAutnenticated\", !_this.isEmpty(decode));\n\n            _this.$store.dispatch(\"setUser\", decode); // 页面跳转\n\n\n            _this.$router.push(\"/index\");\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    isEmpty: function isEmpty(value) {\n      return value === undefined || value === null || _typeof(value) === \"object\" && Object.keys(value).length === 0 || typeof value === \"string\" && value.trim().length === 0;\n    }\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,OAAA,UAAA,MAAA,YAAA;AACA,OAAA,EAAA,MAAA,IAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OADA;AAKA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,QAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA,SAFA;AAGA,UAAA,OAAA,EAAA;AAHA,SADA,CADA;AAQA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,QAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,GAAA,EAAA,CAAA;AAAA,UAAA,GAAA,EAAA,EAAA;AAAA,UAAA,OAAA,EAAA,gBAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAFA;AARA;AALA,KAAA;AAmBA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,QADA,EACA;AAAA;;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA;AACA,YAAA,MAAA,EAAA,MADA;AAEA,YAAA,GAAA,EAAA,iBAFA;AAGA,YAAA,IAAA,EAAA,KAAA,CAAA,SAHA,CAIA;;AAJA,WAAA,EAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA;AADA,gBAEA,KAFA,GAEA,GAAA,CAAA,IAAA,CAAA,IAFA,CAEA,KAFA;AAGA,YAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,KAAA,EAHA,CAKA;;AACA,gBAAA,MAAA,GAAA,UAAA,CAAA,KAAA,CAAA,CANA,CAQA;;AACA,YAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,oBAAA,EAAA,CAAA,KAAA,CAAA,OAAA,CAAA,MAAA,CAAA;;AACA,YAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,SAAA,EAAA,MAAA,EAVA,CAYA;;;AACA,YAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,WAnBA;AAoBA,SAtBA,MAsBA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,gBAAA;AACA,iBAAA,KAAA;AACA;AACA,OA3BA;AA4BA,KA9BA;AA+BA,IAAA,OA/BA,mBA+BA,KA/BA,EA+BA;AACA,aACA,KAAA,KAAA,SAAA,IACA,KAAA,KAAA,IADA,IAEA,QAAA,KAAA,MAAA,QAAA,IAAA,MAAA,CAAA,IAAA,CAAA,KAAA,EAAA,MAAA,KAAA,CAFA,IAGA,OAAA,KAAA,KAAA,QAAA,IAAA,KAAA,CAAA,IAAA,GAAA,MAAA,KAAA,CAJA;AAMA;AAtCA;AAvBA,CAAA","sourcesContent":["<template>\n    <div class=\"login\">\n        <section class=\"form_container\">\n            <div class=\"manage_tip\">\n                <span class=\"title\">碳云云管系统</span>\n            </div>\n            <el-form :model=\"loginUser\" :rules=\"rules\" ref=\"loginForm\" class=\"loginForm\" label-width=\"80px\">\n                <el-form-item label=\"用户名\" prop=\"username\">\n                    <el-input v-model=\"loginUser.username\" placeholder=\"请输入用户名\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"密码\" prop=\"password\">\n                    <el-input v-model=\"loginUser.password\" placeholder=\"请输入密码\" type=\"password\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\"  @click=\"submitForm('loginForm')\" class=\"submit_btn\">登  录</el-button>\n                </el-form-item>\n                <div class=\"tiparea\">\n                    <p>还没有账号？现在<router-link to='/register'>注册</router-link></p>\n                </div>\n            </el-form>\n        </section>\n    </div>\n</template>\n\n<script>\nimport jwt_decode from \"jwt-decode\";\nimport qs from 'qs';\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      loginUser: {\n        username: \"\",\n        password: \"\"\n      },\n      rules: {\n        username: [\n          {\n            required: true,\n            message: \"用户名不能为空\",\n            trigger: \"blur\"\n          }\n        ],\n        password: [\n          { required: true, message: \"密码不能为空\", trigger: \"blur\" },\n          { min: 6, max: 30, message: \"长度在 6 到 30 个字符\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          //this.$axios.post(\"/api/user/login\", this.loginUser).then(res => {\n          this.$axios ({\n                    method: 'post',\n                    url: '/api/user/login',\n                    data: this.loginUser,\n                    //headers: {'Content-Type': 'application/x-www-form-urlencoded' }\n                }).then(res => {\n            // 登录成功\n            const { token } = res.data.data;\n            localStorage.setItem(\"eleToken\", token);\n\n            // 解析token\n            const decode = jwt_decode(token);\n\n            // 存储数据\n            this.$store.dispatch(\"setIsAutnenticated\", !this.isEmpty(decode));\n            this.$store.dispatch(\"setUser\", decode);\n\n            // 页面跳转\n            this.$router.push(\"/index\");\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    isEmpty(value) {\n      return (\n        value === undefined ||\n        value === null ||\n        (typeof value === \"object\" && Object.keys(value).length === 0) ||\n        (typeof value === \"string\" && value.trim().length === 0)\n      );\n    }\n  }\n};\n</script>\n\n<style scoped>\n.login {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: url(../assets/bg.jpg) no-repeat center center;\n  background-size: 100% 100%;\n}\n.form_container {\n  width: 370px;\n  height: 210px;\n  position: absolute;\n  top: 20%;\n  left: 34%;\n  padding: 25px;\n  border-radius: 5px;\n  text-align: center;\n}\n.form_container .manage_tip .title {\n  font-family: \"Microsoft YaHei\";\n  font-weight: bold;\n  font-size: 26px;\n  color: #fff;\n}\n.loginForm {\n  margin-top: 20px;\n  background-color: #fff;\n  padding: 20px 40px 20px 20px;\n  border-radius: 5px;\n  box-shadow: 0px 5px 10px #cccc;\n}\n\n.submit_btn {\n  width: 100%;\n}\n.tiparea {\n  text-align: right;\n  font-size: 12px;\n  color: #333;\n}\n.tiparea p a {\n  color: #409eff;\n}\n</style>"],"sourceRoot":"src/views"}]}