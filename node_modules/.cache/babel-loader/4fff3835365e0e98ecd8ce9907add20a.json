{"remainingRequest":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/babel-loader/lib/index.js!/Users/xuyangbing/Desktop/crontab-client/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xuyangbing/Desktop/crontab-client/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuyangbing/Desktop/crontab-client/client/src/components/Dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xuyangbing/Desktop/crontab-client/client/src/components/Dialog.vue","mtime":1543380525000},{"path":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuyangbing/Desktop/crontab-client/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'logfound',\n  data: function data() {\n    return {\n      form_rules: {\n        hostname: [{\n          required: true,\n          message: '主机名不能为空',\n          trigger: 'blur'\n        }],\n        title: [{\n          required: true,\n          message: \"表达式不能为空！\",\n          trigger: \"blur\"\n        }],\n        note: [{\n          required: true,\n          message: \"注释不能为空！\",\n          trigger: \"blur\"\n        }],\n        updatetime: [{\n          required: true,\n          message: \"创建时间不能为空！\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  props: {\n    dialog: Object,\n    form: Object //接收父节点FunList传递过来的form\n\n  },\n  methods: {\n    onSubmit: function onSubmit(form) {\n      var _this = this;\n\n      this.$refs[form].validate(function (valid) {\n        if (valid) {\n          var url = _this.dialog.option == 'add' ? 'add' : 'edit';\n          var data = _this.form;\n          var params = new URLSearchParams();\n          params.append('job', JSON.stringify(data));\n\n          _this.$axios.post(\"/api/crontab/\".concat(url), params, {\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded'\n            }\n          }).then(function (res) {\n            _this.$message({\n              message: '添加成功',\n              type: 'success'\n            }); //隐藏dialog\n\n\n            _this.dialog.show = false;\n\n            _this.$emit(\"update\"); //emit刷新,重新请求数据,让父级刷新\n\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,UAAA,EAAA;AACA,QAAA,QAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CADA;AAEA,QAAA,KAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,UAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CAFA;AAKA,QAAA,IAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CALA;AAQA,QAAA,UAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,WAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AARA;AADA,KAAA;AAcA,GAjBA;AAkBA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,IAAA,EAAA,MAFA,CAEA;;AAFA,GAlBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,IADA,EACA;AAAA;;AACA,WAAA,KAAA,CAAA,IAAA,EAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,GAAA,GAAA,KAAA,CAAA,MAAA,CAAA,MAAA,IAAA,KAAA,GAAA,KAAA,GAAA,MAAA;AACA,cAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AACA,cAAA,MAAA,GAAA,IAAA,eAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,KAAA,EAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,wBAAA,GAAA,GAAA,MAAA,EAAA;AAAA,YAAA,OAAA,EAAA;AAAA,8BAAA;AAAA;AAAA,WAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA;AACA,cAAA,OAAA,EAAA,MADA;AAEA,cAAA,IAAA,EAAA;AAFA,aAAA,EADA,CAKA;;;AACA,YAAA,KAAA,CAAA,MAAA,CAAA,IAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,QAAA,EAPA,CAOA;;AACA,WATA;AAUA;AACA,OAjBA;AAkBA;AApBA;AAtBA,CAAA","sourcesContent":["<template>\n    <div class=\"logfound\">\n        <el-dialog :title=\"dialog.title\" :visible.sync=\"dialog.show\"  :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :modal-append-to-body=\"false\">\n            <div class=\"form\">\n                <el-form ref=\"form\" :model=\"form\" :rules=\"form_rules\" label-width=\"120px\" style=\"margin: 10px;width:auto;\">\n                    <el-form-item prop='hostname'  label=\"主机名:\">\n                        <el-input type=\"hostname\" v-model=\"form.hostname\"></el-input>\n                    </el-form-item>\n\n                    <el-form-item prop='title' label=\"表达式:\">\n                        <el-input type=\"title\" v-model=\"form.title\"></el-input>\n                    </el-form-item>\n\n                    <el-form-item prop='note' label=\"注释:\">\n                        <el-input type=\"note\" v-model=\"form.note\"></el-input>\n                    </el-form-item>\n\n                    <el-form-item prop='opreater' label=\"所属账号:\">\n                        <el-input type=\"opreater\" v-model=\"form.opreater\"></el-input>\n                    </el-form-item>\n                    <el-form-item prop='updatetime' label=\"创建时间:\">\n                        <el-input type=\"updatetime\" v-model=\"form.updatetime\"></el-input>\n                    </el-form-item>\n                    <el-form-item  class=\"text_right\">\n                        <el-button @click=\"dialog.show = false\">取 消</el-button>\n                        <el-button type=\"primary\" @click='onSubmit(\"form\")'>提 交</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'logfound',\n        data(){\n            return {\n                form_rules: {\n                    hostname:[{required:true, message:'主机名不能为空', trigger:'blur'}],\n                    title: [\n                        { required: true, message: \"表达式不能为空！\", trigger: \"blur\" }\n                    ],\n                    note: [\n                        { required: true, message: \"注释不能为空！\", trigger: \"blur\" }\n                    ],\n                    updatetime: [\n                        { required: true, message: \"创建时间不能为空！\", trigger: \"blur\" }\n                    ]\n                }\n            }\n        },\n        props: {\n            dialog: Object,\n            form: Object  //接收父节点FunList传递过来的form\n        },\n        methods:{\n            onSubmit(form){\n                this.$refs[form].validate(valid => {\n                    if (valid){\n                        const url = this.dialog.option == 'add' ? 'add' : 'edit';\n                        let data = this.form;\n                        const params = new URLSearchParams();\n                        params.append('job', JSON.stringify(data));\n                        this.$axios.post(`/api/crontab/${url}`,params,{headers: {'Content-Type':'application/x-www-form-urlencoded'}})\n                            .then(res => {\n                                this.$message({\n                                    message:'添加成功',\n                                    type:'success'\n                                });\n                                //隐藏dialog\n                                this.dialog.show = false;\n                                this.$emit(\"update\");   //emit刷新,重新请求数据,让父级刷新\n                            });\n                    }\n                })\n            }\n        }\n    }\n</script>\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/components"}]}